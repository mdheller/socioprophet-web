export function spaceMeta(){const env=(import.meta as any).env;return{space:env.VITE_SPACE||'local',ns:env.VITE_NAMESPACE||'default',apiBase:env.VITE_API_BASE||'/api',routerBase:env.VITE_ROUTER_BASE||'/',wsUrl:env.VITE_WS_URL||''}};function headers(){const h=new Headers({'content-type':'application/json'});const t=localStorage.getItem('agent_bearer_token');if(t)h.set('Authorization',`Bearer ${t}`);const k=localStorage.getItem('agent_api_key');if(k)h.set('X-API-Key',k);const {space,ns}=spaceMeta();h.set('X-Space',space);h.set('X-NS',ns);return h};export async function apiGet(p:string){const b=spaceMeta().apiBase,u=p.startsWith('/api')?p:`${b}${p}`,r=await fetch(u,{headers:headers()});if(!r.ok)throw new Error(await r.text());return r.json()};export async function apiPost(p:string,body:any){const b=spaceMeta().apiBase,u=p.startsWith('/api')?p:`${b}${p}`,r=await fetch(u,{method:'POST',headers:headers(),body:JSON.stringify(body)});if(!r.ok)throw new Error(await r.text());return r.json()}